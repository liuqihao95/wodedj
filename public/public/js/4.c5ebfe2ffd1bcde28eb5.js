webpackJsonp([4],{TFKA:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("Dd8w"),n=o.n(s),i={name:"add",data:function(){return{form:{title:"",img:"",num:""},token:""}},methods:{getMsg:function(){var t=this,e={id:this.$route.query.id};this.$axios.post("getBlong",e).then(function(e){t.form=e.data[0]})},postForm:function(){var t=this,e=this.form;this.$axios.post("addBlong",e).then(function(e){200==e.code?(t.$message({message:"你提交成功",type:"success"}),setTimeout(function(){t.$router.push("/blong")},1e3)):t.$message.error("提交失败")})},updateForm:function(){var t=this,e=this.$route.query.id,o=n()({},this.form,{id:e});this.$axios.post("updateBlong",o).then(function(e){200==e.code?(t.$message({message:"你修改成功",type:"success"}),setTimeout(function(){t.$router.push("/blong")},1e3)):t.$message.error("修改失败")})},handleAvatarSuccess:function(t){this.form.img=t.url},getToken:function(){var t=this;this.$axios.qiniuGet().then(function(e){t.token=e.data})}},watch:{$route:function(){this.form={title:"",img:"",type:"",contentText:"",content:""}}},mounted:function(){"党支部编辑页"==this.$route.name?(this.getToken(),this.getMsg()):this.getToken()}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"addNews"},[o("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"党支部"}},[o("el-input",{staticStyle:{width:"30%"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"头图"}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://upload-z1.qiniup.com","show-file-list":!1,"on-success":t.handleAvatarSuccess,data:{token:t.token}}},[t.form.img?o("img",{staticClass:"avatar",attrs:{src:this.form.img}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),o("el-form-item",{attrs:{label:"分类排序"}},[o("el-input-number",{attrs:{min:1,max:10,label:"描述文字"},model:{value:t.form.num,callback:function(e){t.$set(t.form,"num",e)},expression:"form.num"}})],1),t._v(" "),o("el-form-item",["党支部添加页"==this.$route.name?o("el-button",{attrs:{type:"primary"},on:{click:t.postForm}},[t._v("添加")]):t._e(),t._v(" "),"党支部编辑页"==this.$route.name?o("el-button",{attrs:{type:"primary"},on:{click:t.updateForm}},[t._v("保存并添加")]):t._e()],1)],1)],1)},staticRenderFns:[]};var r=o("VU/8")(i,a,!1,function(t){o("n7E8"),o("suhF")},"data-v-076f99db",null);e.default=r.exports},n7E8:function(t,e){},suhF:function(t,e){}});
//# sourceMappingURL=4.c5ebfe2ffd1bcde28eb5.js.map