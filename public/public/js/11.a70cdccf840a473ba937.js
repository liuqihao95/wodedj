webpackJsonp([11],{"1xOm":function(t,e){},"9GtF":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"list",data:function(){return{tableData:[],type:0,arr:[],num:1,currentPage:1}},methods:{addLunbo:function(t,e,a){var n=this,s={newsId:t,title:e,img:a};this.$axios.post("addLunbo",s).then(function(t){200==t.code?(n.$message({showClose:!0,message:"轮播图生成成功",type:"success"}),n.$router.push("/lunbo")):n.$message({showClose:!0,message:"轮播图生成失败",type:"error"})})},handleCurrentChange:function(t){this.currentPage=t,this.getMsg()},getType:function(){var t=this;this.$axios.post("getNewsType").then(function(e){t.arr=e.data})},addNews:function(){this.$router.push("/news/add")},delNews:function(t){var e={_id:t};this.$axios.post("delNews",e).then(function(t){console.log(t)}),this.getMsg()},updateNews:function(t){this.$router.push({path:"/news/editor",query:{id:t}})},getMsg:function(){var t=this,e={type:this.type,page:this.currentPage};this.$axios.post("getNews",e).then(function(e){t.tableData=e.data,t.num=e.num})}},watch:{type:function(){this.getMsg()}},created:function(){this.getType(),this.getMsg()}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"newsList"},[a("div",{staticClass:"type"},[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.arr,function(t,e){return a("el-option",{key:e,attrs:{label:t.title,value:e}})})),t._v(" "),a("el-button",{staticClass:"addNews",attrs:{type:"primary"},on:{click:t.addNews}},[t._v("添加新闻")])],1),t._v(" "),a("el-table",{staticStyle:{width:"90%",margin:"0 auto"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{label:"头图",width:"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"titleImg",attrs:{src:t.row.img}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.updateNews(e.row._id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){t.delNews(e.row._id)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){t.addLunbo(e.row._id,e.row.title,e.row.img)}}},[t._v("生成轮播图")])]}}])})],1),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"page-size":5,"current-page":t.currentPage,layout:"prev, pager, next, jumper",total:t.num},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(n,s,!1,function(t){a("1xOm")},"data-v-7402b42a",null);e.default=r.exports}});
//# sourceMappingURL=11.a70cdccf840a473ba937.js.map