webpackJsonp([2],{EGmP:function(t,e){},H9Os:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("Dd8w"),s=o.n(n),i={name:"add",components:{editor:o("cnC7").a},data:function(){return{form:{title:"",img:"",type:"",contentText:"",content:""},token:"",arr:[]}},methods:{getType:function(){var t=this;this.$axios.post("getNewsType").then(function(e){t.arr=e.data})},getMsg:function(){var t=this,e={id:this.$route.query.id};this.$axios.post("getNews",e).then(function(e){t.form=e.data[0]})},postForm:function(){var t=this,e=this.form;console.log(e),this.$axios.post("addNews",e).then(function(e){200==e.code?t.$message({message:"添加成功",type:"success"}):t.$message.error("添加失败")}),this.$router.push("/news")},updateForm:function(){var t=this.$route.query.id,e=s()({},this.form,{id:t});this.$axios.post("updateNews",e).then(function(t){}),this.$router.push("/news")},getText:function(t){this.form.contentText=t},handleAvatarSuccess:function(t){this.form.img=t.url},getToken:function(){var t=this;this.$axios.qiniuGet().then(function(e){t.token=e.data})}},watch:{$route:function(){this.form={title:"",img:"",type:"",contentText:"",content:""}}},mounted:function(){"新闻编辑页"==this.$route.name?(this.getToken(),this.getType(),this.getMsg()):(this.getToken(),this.getType())}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"addNews"},[o("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"新闻标题"}},[o("el-input",{staticStyle:{width:"80%"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"活动区域"}},[o("el-select",{attrs:{placeholder:"请选择类型"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.arr,function(t,e){return o("el-option",{key:e,attrs:{label:t.title,value:e}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"新闻头图"}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://upload-z1.qiniup.com","show-file-list":!1,"on-success":t.handleAvatarSuccess,data:{token:t.token}}},[t.form.img?o("img",{staticClass:"avatar",attrs:{src:t.form.img}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),o("el-form-item",{attrs:{label:"主体内容"}},[o("editor",{on:{getText:t.getText},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),o("el-form-item",["新闻添加页"==this.$route.name?o("el-button",{attrs:{type:"primary"},on:{click:t.postForm}},[t._v("添加")]):t._e(),t._v(" "),"新闻编辑页"==this.$route.name?o("el-button",{attrs:{type:"primary"},on:{click:t.updateForm}},[t._v("保存并添加")]):t._e()],1)],1)],1)},staticRenderFns:[]};var r=o("VU/8")(i,a,!1,function(t){o("EGmP"),o("T8Kh")},"data-v-7cf01d06",null);e.default=r.exports},T8Kh:function(t,e){}});
//# sourceMappingURL=2.963a93cace233f9532b0.js.map